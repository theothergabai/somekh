<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>יד לקוראים</title>
  <script>
    (function(){
      try {
        var href = window.location.href;
        var url = new URL(href);
        var hash = window.location.hash || '';
        var hp = new URLSearchParams('');
        try { var qi = hash.indexOf('?'); if (qi !== -1) hp = new URLSearchParams(hash.substring(qi + 1)); } catch(e){}
        var qver = url.searchParams.get('ver') || hp.get('ver') || '';
        if (qver) { try { localStorage.setItem('__versionOverride', qver); } catch(e){} }
        var override = qver || (localStorage.getItem('__versionOverride') || '').trim();
        var qfont = (url.searchParams.get('font') || hp.get('font') || '').toLowerCase();
        if (qfont === 'ezra' || qfont === 'taamey') { try { localStorage.setItem('__fontOverride', qfont); } catch(e){} }
        var fontPref = qfont || (localStorage.getItem('__fontOverride') || '').toLowerCase();
        if (!fontPref && override) { if (/\.2$/.test(override)) fontPref = 'taamey'; else if (/\.3$/.test(override)) fontPref = 'ezra'; }
        document.documentElement.setAttribute('data-font', (fontPref === 'ezra' || fontPref === 'taamey') ? fontPref : 'taamey');
      } catch (e) {}
    })();
  </script>
  <style>
    /* Embed Ezra SIL full (provide file at ./assets/fonts/ezra-sil-full.woff2) */
    @font-face {
      font-family: 'EzraSIL-Embedded';
      src: local('Ezra SIL'), local('Ezra SIL SR'), url('./assets/fonts/ezra-sil-full.woff2') format('woff2');
      font-weight: 400;
      font-style: normal;
      font-display: swap;
      unicode-range: U+0590-05FF, U+FB1D-FB4F;
    }
    /* Add Taamey David CLM webfont (place taamey-david-clm.woff2 at ./assets/fonts/) */
    @font-face {
      font-family: 'Taamey David CLM';
      src: local('Taamey David CLM'), url('./assets/fonts/taamey-david-clm.woff2') format('woff2');
      font-weight: 400;
      font-style: normal;
      font-display: swap;
      unicode-range: U+0590-05FF, U+FB1D-FB4F;
    }
    /* Title and flip faces (where the Hebrew marks render) */
header h1,
.flip-face {
  /* Prefer Taamey David CLM by default; Ezra SIL as fallback */
  font-family: 'Taamey David CLM', 'EzraSIL-Embedded', "Ezra SIL", "Ezra SIL SR", "Noto Serif Hebrew", "Noto Sans Hebrew", serif;
  font-feature-settings: 'ccmp' 1, 'rlig' 1, 'kern' 1, 'mark' 1, 'mkmk' 1;
}
/* Runtime font override via html[data-font] */
html[data-font="ezra"] header h1,
html[data-font="ezra"] .flip-face,
html[data-font="ezra"] .help-body {
  font-family: 'EzraSIL-Embedded', 'Taamey David CLM', "Ezra SIL", "Ezra SIL SR", "Noto Serif Hebrew", "Noto Sans Hebrew", serif;
}
html[data-font="taamey"] header h1,
html[data-font="taamey"] .flip-face,
html[data-font="taamey"] .help-body {
  font-family: 'Taamey David CLM', 'EzraSIL-Embedded', "Ezra SIL", "Ezra SIL SR", "Noto Serif Hebrew", "Noto Sans Hebrew", serif;
}
/* Larger help text when Taamey is active */
html[data-font="taamey"] .help-body { font-size: 21px; }
/* Larger symbol text when Taamey is active */
html[data-font="taamey"] .flip-face .symbol-text { font-size: calc(3rem + 6px) !important; }
/* Match Ezra default h1 size exactly under Taamey */
html[data-font="taamey"] header h1 { font-size: 2em; }
/* Bump overall card text when Taamey is active */
html[data-font="taamey"] .flip-face { font-size: 1.12em; }
/* Ensure English help uses Latin-friendly fonts instead of Taamey */
.help-wrap[dir='ltr'] .help-body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    body { font-family: system-ui, sans-serif; margin: 0; padding: 0; background: #0b1220; color: #e6edf3; }
    header { padding: 16px 20px; border-bottom: 1px solid #1e293b; position: relative; }
    header h1 { margin: 0; text-align: center; }
    main { padding: 20px; }
    .container { max-width: 960px; margin: 0 auto; }
    .row { display: flex; gap: 16px; flex-wrap: wrap; align-items: center; }
    .card { background: #111827; border: 1px solid #1f2937; border-radius: 10px; padding: 16px; flex: 1; min-width: 260px; }
    button { background: #3b82f6; color: white; border: 0; padding: 10px 14px; border-radius: 8px; cursor: pointer; }
    button.secondary { background: #0ea5e9; }
    #app { min-height: calc(100vh - 60px); }
    img { max-width: 100%; height: auto; border-radius: 8px; }
/* Flip card animation */
.flip-card { perspective: 1400px; perspective-origin: 50% 50%; max-width: 720px; margin: 0 auto 16px; }
.flip-inner {
  position: relative;
  width: 100%;
  aspect-ratio: 16 / 9;
  transform-style: preserve-3d;
}
.flip-face {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  overflow: hidden;
  border-radius: 8px;
  background: rgba(17, 24, 39, 0.6);
  transition: transform 0.8s cubic-bezier(0.22, 0.61, 0.36, 1);
  /* Keep content away from edges so chevrons are not visually covered */
  box-sizing: border-box;
  padding-left: 88px;
  padding-right: 88px;
}
/* Initial: show front, hide back by rotating it away */
.flip-front { transform: rotateY(0deg); }
.flip-back  { transform: rotateY(-180deg); }
/* Flipped state: swap rotations */
.flip-inner.flipped .flip-front { transform: rotateY(180deg); }
.flip-inner.flipped .flip-back  { transform: rotateY(0deg); }
.flip-face img {
  max-height: 100%;
  width: auto;
  /* Respect internal padding; additionally cap to siluq width and viewport */
  max-width: min(100%, var(--signal-max-width, 420px), 90vw);
  pointer-events: none; /* let chevrons and card receive interactions */
}
@media (max-width: 600px) {
  .flip-face { padding-left: 64px; padding-right: 64px; }
}
/* Floating action links */
.fab {
  position: fixed;
  bottom: 16px;
  z-index: 50;
  font-size: 22px;
  line-height: 1;
  text-decoration: none;
  color: #e6edf3;
  background: #1f2937;
  border: 1px solid #334155;
  padding: 10px 12px;
  border-radius: 9999px;
  box-shadow: 0 6px 18px rgba(0,0,0,0.35);
}
.fab:hover { background: #273449; }
.fab-right { right: 16px; }
.fab-left { left: 16px; }
    /* Header help button styled like icon-only control */
    .header-help {
      position: absolute;
      top: 50%;
      right: 16px;
      transform: translateY(-50%);
      z-index: 10;
      font-size: 20px;
      line-height: 1;
      text-decoration: none;
      color: #0b1220;
      background: #fef08a; /* light yellow */
      border: 1px solid #eab308; /* amber-500 */
      width: 36px;
      height: 36px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 9999px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.20);
    }
    .header-help:hover { background: #fde047; }
    .header-yinyang {
      position: absolute;
      top: 50%;
      left: 16px;
      transform: translateY(-50%);
      z-index: 10;
      font-size: 20px;
      line-height: 1;
      text-decoration: none;
      color: #e6edf3;
      background: rgba(31, 41, 55, 0.75);
      border: 1px solid #334155;
      width: 36px;
      height: 36px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 9999px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.20);
      cursor: pointer;
    }
    .header-yinyang:hover { background: rgba(39, 52, 73, 0.9); }
    /* Bottom-center Aleph font switcher */
    .font-switch {
      position: fixed;
      bottom: 52px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 65;
      display: flex;
      gap: 8px;
      background: rgba(17,24,39,0.75);
      border: 1px solid #334155;
      padding: 6px 8px;
      border-radius: 9999px;
      box-shadow: 0 10px 24px rgba(0,0,0,0.35);
      backdrop-filter: blur(2px);
    }
    .aleph-btn {
      width: 36px; height: 36px;
      display: inline-flex; align-items: center; justify-content: center;
      border-radius: 9999px;
      border: 1px solid #334155;
      background: #1f2937;
      color: #e6edf3;
      cursor: pointer;
      font-size: 22px;
      line-height: 1;
    }
    .aleph-btn.on { background: #e6edf3; color: #0b1220; }
    .aleph-taamey { font-family: 'Taamey David CLM', serif; }
    .aleph-ezra { font-family: 'EzraSIL-Embedded', serif; }
    /* Help page body styling (ensure Hebrew font+features) */
    .help-body {
      background:#0f172a;
      border:1px solid #1f2937;
      border-radius:10px;
      padding:16px;
      line-height:1.6;
      font-family: 'Taamey David CLM', 'EzraSIL-Embedded', "Ezra SIL", "Ezra SIL SR", "Noto Serif Hebrew", "Noto Sans Hebrew", serif;
      font-size: 18px;
      font-feature-settings: 'ccmp' 1, 'rlig' 1, 'kern' 1, 'mark' 1, 'mkmk' 1;
      white-space: pre-wrap;
    }
    /* Version watermark */
    .version-watermark {
      position: fixed;
      bottom: 22px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 12px;
      color: #94a3b8;
      background: rgba(2,6,23,0.7);
      border: 1px solid #334155;
      padding: 4px 8px;
      border-radius: 6px;
      z-index: 60;
      user-select: none;
      pointer-events: none;
    }
    /* Page boot loader (visible before JS initializes) */
    @keyframes boot-spin { to { transform: rotate(360deg); } }
    .boot-layer {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(2, 6, 23, 0.85);
      z-index: 120;
    }
    .boot-box { display: flex; flex-direction: column; align-items: center; gap: 10px; }
    .boot-spinner {
      width: 48px; height: 48px;
      border: 4px solid rgba(148,163,184,0.5);
      border-top-color: #60a5fa;
      border-radius: 9999px;
      animation: boot-spin 0.9s linear infinite;
    }
    .boot-text { font-size: 14px; color: #cbd5e1; }
  </style>
</head>
<body>
  <div id="boot-loader" class="boot-layer">
    <div class="boot-box">
      <div class="boot-spinner"></div>
      <div class="boot-text">Loading…</div>
    </div>
  </div>
  <header class="container">
    <h1>יד לקוראים</h1>
    <button id="symbols-first-toggle" class="header-yinyang" aria-label="Symbols-first">☯</button>
    <a class="header-help" href="#/help" aria-label="Help">?</a>
  </header>
  <main class="container">
    <div id="app"></div>
  </main>
  <!-- Bottom-center Aleph font switcher -->
  <div id="font-switch" class="font-switch" role="group" aria-label="Choose font">
    <button id="btn-font-taamey" class="aleph-btn aleph-taamey" data-font="taamey" title="Taamey David CLM" aria-pressed="false">א</button>
    <button id="btn-font-ezra" class="aleph-btn aleph-ezra" data-font="ezra" title="Ezra SIL" aria-pressed="false">א</button>
  </div>
  <!-- Floating links: printer (right) and email (left) -->
<a class="fab fab-right"
   href="https://drive.google.com/file/d/1cGAMcxf5Vo9fnsIwAJDXch_j58SONHpZ/view?usp=sharing"
   target="_blank" rel="noopener noreferrer" title="Download PDF" aria-label="Download PDF">
  <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
    <path d="M7 3h7l5 5v13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z" fill="#FFFFFF"/>
    <path d="M14 3v4a1 1 0 0 0 1 1h4" fill="none" stroke="#CBD5E1" stroke-width="1"/>
    <rect x="3" y="14.2" width="10.2" height="6" rx="1.2" fill="#EF4444"/>
    <path d="M5 18.9v-3h1.5c.6 0 1 .4 1 1s-.4 1-1 1H6v1H5zm3.4-3H10c1 0 1.7.7 1.7 1.5S11 19.9 10 19.9H8.4v-4zM10 18.9c.4 0 .7-.3.7-.6s-.3-.6-.7-.6h-.6v1.2H10zm2.8-3h2.5v1h-1.5v.6h1.4v1h-1.4v1.4h-1v-4z" fill="#FFFFFF"/>
  </svg>
</a>
<a class="fab fab-left"
   href="mailto:theothergabai@gmail.com"
   title="Email">✉️</a>
  <div class="version-watermark"></div>
  <script type="module" src="./src/main.js?v=20251115.4"></script>
</body>
</html>
